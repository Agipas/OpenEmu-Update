#include "sms.h"
#include "vdp.h"
#include "port.h"
#include "psg.h"
/* ----------------------------------------------------------------------------------- */
int16u rndLatest;

/* ----------------------------------------------------------------------------------- */
void sms_init(){
	MAPPER_CTRL = 0xAB;
	port_init();
	vdp_init();
	psg_init();
}
/* ----------------------------------------------------------------------------------- */
int8u rnd(){
	int16u r;

	r = rndLatest;
	r ^= 0x9630;
	r -= 0x6553;
	r = (r >> 14) | (r << 2);
	rndLatest = r;
	return r;
	/*
	    move.w  _rndLatest, d0
        eori.w  #$9630, d0
        subi.w  #$6553, d0
        rol.w   #2, d0
        move.w  d0, _rndLatest
	*/
}
/* ----------------------------------------------------------------------------------- */

